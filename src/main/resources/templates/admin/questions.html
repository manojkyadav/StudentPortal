<!doctype html>
<html lang="en">
<html xmlns:th="http://www.thymeleaf.org">

<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width, initial-scale=1" />
	<title>Classes</title>
	<meta name="description" content="A beautiful responsive dashboard template built with HTML5 and CSS3." />
	<link rel="stylesheet" th:href="@{/css/style.css}">
	<meta charset="UTF-8">
	<title>Add Question</title>
	<style>

	</style>
</head>
<body>
<div class="container">
	<!-- Include header -->
	<div th:replace="~{fragments/header :: header}"></div>
	<div class="layout">
		<div th:replace="~{fragments/sidebar :: sidebar}"></div>
		<!-- Main content -->
		<main class="content">
			<div class="container">
			<section class="card">
				<h1>Add Question</h1>
				<form th:action="@{/admin/addquestion}" th:object="${question}" method="post">
					<label for="className">Class Name</label>
					<select id="className" name="className">
						<option value="">Select Class</option>
						<option th:each="cls : ${classList}" th:value="${cls.className}"
							th:text="${cls.className}">
						</option>
					</select>
					<label for="subjectName">Subject Name</label>
					<select name="subjectName">
						<option value="">Select Subject</option>
						<option th:each="cls : ${subjectList}" th:value="${cls.subjectName}"
							th:text="${cls.subjectName}">
						</option>
					</select>
					<label for="topicName">Topic Name</label>
					<select name="topicName">
						<option value="">Select Topic</option>
						<option th:each="cls : ${topicList}" th:value="${cls.topicName}"
							th:text="${cls.topicName}">
						</option>
					</select>
					<label for="question">Question</label>
					<textarea id="question" th:field="*{question}" placeholder="Enter your question"></textarea>
					<div class="options-container">
						<label>Options</label>
						<div th:each="opt, iterStat : *{options}" class="option-row">
							<input type="text" th:field="*{options[__${iterStat.index}__].option}"
								placeholder="Option text">
							<input type="text" th:field="*{options[__${iterStat.index}__].value}"
								placeholder="Option value">
						</div>
					</div>
					<label for="correctIndex">Correct Option Index</label>
					<input type="text" id="correctIndex" th:field="*{correctIndex}" placeholder="0, 1, 2, ...">

					<label for="explanation">Explanation</label>
					<textarea id="explanation" th:field="*{explanation}"
						placeholder="Enter explanation"></textarea>
					<button type="submit">Save Question</button>
				</form>
			</section>
			<h2>Question Details</h2>
			<section class="grid">
				<div class="card">
					<table class="table">
						<tr>
							<th>Class Name</th>
							<th>Subject Name</th>
							<th>Topic Name</th>
							<th>Question</th>
							<th>Options</th>
							<th>Action</th>
						</tr>
						<tr th:each="cl: ${questionList}">
							<td th:text="${cl.className}"></td>
							<td th:text="${cl.subjectName}"></td>
							<td th:text="${cl.topicName}"></td>
							<td th:text="${cl.question}"></td>
							<td th:text="${cl.options}"></td>
							<td>
								<!-- ✅ Option 1: Edit link -->
								<a th:href="@{/admin/edit}" class="btn btn-primary btn-sm">Edit</a>

								<!-- ✅ Option 2: Delete button -->
								<a th:href="@{/admin/deletequestion/{questionid}(questionid=${cl.id})}"
									class="btn btn-danger btn-sm"
									onclick="return confirm('Are you sure you want to delete this Question?')">
									Delete
								</a>
							</td>
						</tr>
					</table>
				</div>
			</section>
		</div>
	</body>
</html>